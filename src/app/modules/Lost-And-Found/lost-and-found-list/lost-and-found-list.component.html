<div class="container mt-4">
    <h2 class="page-title">مفقودات القطار</h2>
    
    <!-- Success/Error Messages -->
    <div *ngIf="successMessage" class="alert alert-success">
        <i class="fas fa-check-circle me-2"></i>{{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger">
        <i class="fas fa-exclamation-circle me-2"></i>{{ errorMessage }}
    </div>
    
    <!-- Search Card -->
    <div class="search-card">
        <div class="card-body">
            <div class="row align-items-end">
                <div class="col-md-8">
                    <label for="searchDate" class="form-label">
                        <i class="fas fa-calendar-alt me-2"></i>البحث بتاريخ الفقدان
                    </label>
                    <input id="searchDate" type="date" class="form-control" [(ngModel)]="searchDate" (ngModelChange)="search()" />
                </div>
                <div class="col-md-4 mt-3 mt-md-0">
                    <button class="report-btn w-100" (click)="reportLost()">
                        <i class="fas fa-plus me-2"></i>إبلاغ عن مفقود
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">جاري التحميل...</span>
        </div>
        <div class="empty-message">جاري تحميل البيانات...</div>
    </div>
    
    <!-- Empty State -->
    <div *ngIf="!loading && posts.length === 0" class="empty-state">
        <i class="fas fa-search fa-3x text-muted mb-3"></i>
        <div class="empty-message">لا توجد بلاغات مفقودات لهذا القطار</div>
    </div>
    
    <!-- Lost Items Grid -->
    <div *ngIf="!loading && posts.length > 0" class="lost-items-grid">
        <div *ngFor="let post of posts" class="lost-item-card">
            <div class="card-body">
                <!-- الوصف في المقدمة -->
                <div class="card-description">
                    {{ post.ItemDescription }}
                </div>
                
                <div class="card-content">
                    <div class="card-info">
                        <p class="card-text">
                            <strong><i class="fas fa-phone me-2"></i>بيانات التواصل:</strong> {{ post.ContactDetails }}
                        </p>
                        
                        <p class="card-text">
                            <strong><i class="fas fa-calendar-day me-2"></i>تاريخ الفقدان:</strong> {{ post.DateLost | date:'yyyy-MM-dd' }}
                        </p>
                        
                        <img *ngIf="post.Photo" [src]="post.Photo" alt="صورة المفقود" class="lost-item-image" />
                    </div>
                    
                    <div *ngIf="isUserPost(post)" class="action-buttons">
                        <button class="btn-edit" (click)="editPost(post.LfId)">
                            <i class="fas fa-edit me-2"></i>تعديل
                        </button>
                        <button class="btn-delete" (click)="deletePost(post.LfId)">
                            <i class="fas fa-trash me-2"></i>حذف
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pagination -->
    <div *ngIf="!loading && posts.length > 0" class="pagination-container">
        <button class="pagination-btn" [disabled]="pageNumber === 1" (click)="previousPage()">
            <i class="fas fa-chevron-right me-2"></i>السابق
        </button>
        
        <div class="pagination-info">
            <i class="fas fa-file-alt me-2"></i>صفحة {{ pageNumber }} من {{ totalPages }}
        </div>
        
        <button class="pagination-btn" [disabled]="pageNumber >= totalPages" (click)="nextPage()">
            التالي<i class="fas fa-chevron-left ms-2"></i>
        </button>
    </div>
</div>