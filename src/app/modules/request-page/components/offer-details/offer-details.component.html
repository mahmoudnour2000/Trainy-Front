<div class="profile-header" *ngIf="offer && !isLoading; else loadingOrError">
  <div class="profile-header-content">
    <!-- Product Image -->
    <div class="product-image-container">
      <img [src]="offer.image || 'assets/defaultOrder.jpg'"  
          onerror="this.src='assets/defaultOrder.jpg'" class="product-image">
    </div>
    
    <!-- Product Details -->
    <div class="product-details">
      <!-- Title -->
      
      <!-- Description -->
      <p class="profile-description">{{offer.description}}</p>
      
      <!-- Tags -->
      <div class="profile-tags">
        <span class="tag tag-from">من: {{offer.fromStationName}}</span>
        <span class="tag tag-to">إلى: {{offer.toStationName}}</span>
        <span class="tag tag-category">{{offer.category}}</span>
        <span class="tag tag-weight">{{offer.weight}} كجم</span>
        <span class="tag tag-price">{{offer.price}} ريال</span>
        <span class="tag tag-breakable" *ngIf="offer.isBreakable">قابل للكسر</span>
      </div>
      
      <!-- Date -->
      <div class="offer-date mb-3">
        <i class="fas fa-calendar-alt me-2"></i>
        <span>{{formatDate(offer.createdAt)}}</span>
      </div>
      
      <!-- Profile meta -->
      <div class="profile-meta">
        <div class="d-flex align-items-center">
          <img [src]="offer.senderImage || '/assets/images/default-user.png'" class="profile-avatar-lg me-2" alt="صورة شخصية">
          <span class="fw-bold">{{offer.senderName || 'Unknown Sender'}} (صاحب العرض)</span>
        </div>
        <span class="request-badge" id="requestCounter">عدد الطلبات: {{offer.requestsCount || 0}}</span>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingOrError>
  <div class="profile-header">
    <div class="d-flex justify-content-center align-items-center p-5">
      <div *ngIf="isLoading" class="spinner-border text-primary" role="status">
        <span class="visually-hidden">جاري التحميل...</span>
      </div>
      <div *ngIf="!isLoading && error" class="alert alert-danger">
        {{error}}
      </div>
      <div *ngIf="!isLoading && !error && !offer" class="alert alert-warning">
        لم يتم العثور على بيانات العرض
      </div>
    </div>
  </div>
</ng-template> 